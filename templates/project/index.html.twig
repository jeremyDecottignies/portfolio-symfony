{% extends 'base.html.twig' %}

{% block title %}Mes projets{% endblock %}

{% block body %}
    <h1 class="mb-4 text-center">Mes projets</h1>
    <p class="text-muted mb-0">
        Quelques réalisations faites en BTS SIO et en projet personnel.
    </p>

    <div class="row g-4">
        {% for project in projects %}
            <div class="col-md-4">
                <div class="card h-100 shadow-sm">
                    {# Si tu ajoutes une image plus tard #}
                    {% if project.imageName is defined and project.imageName %}
                        <img src="{{ asset('uploads/projects/' ~ project.imageName) }}" class="card-img-top" alt="{{ project.nom }}">
                    {% endif %}

                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">{{ project.nom }}</h5>
                        <p class="card-text">
                            {{ project.courteDescription|striptags|slice(0, 120) ~ '...' }}
                        </p>
                        {# Icônes de technologies #}
                        {% if project.technologies is defined and project.technologies is not empty %}
                            <div class="mt-2 tech-icons">
                                {% for tech in project.technologies %}
                                    {% set iconClass = {
                                        'html': 'devicon-html5-plain colored',
                                        'css': 'devicon-css3-plain colored',
                                        'js': 'devicon-javascript-plain colored',
                                        'javascript': 'devicon-javascript-plain colored',
                                        'php': 'devicon-php-plain colored',
                                        'symfony': 'devicon-symfony-original',
                                        'mysql': 'devicon-mysqli-plain colored',
                                        'sql': 'devicon-mysql-plain colored',
                                        'python': 'devicon-python-plain colored'
                                    }[tech|lower] ?? null %}

                                    {% if iconClass %}
                                        <i class="{{ iconClass }} me-1" title="{{ tech }}"></i>
                                    {% else %}
                                        <span class="badge bg-secondary me-1">{{ tech }}</span>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        {% endif %}
                        <div class="mt-auto pt-3">
                            <a href="{{ path('project_show', { id: project.id }) }}" class="btn btn-primary btn-sm">
                                Voir le projet
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <p>Aucun projet pour le moment.</p>
        {% endfor %}
    </div>
{% endblock %}
